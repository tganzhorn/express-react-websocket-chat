{"ast":null,"code":"import _toConsumableArray from\"/home/tobias/Documents/test-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/tobias/Documents/test-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import SocketIOClient from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var App=function App(){var socket=useRef(null);var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),userName=_useState2[0],setUserName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),online=_useState6[0],setOnline=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),messages=_useState8[0],setMessages=_useState8[1];var _useState9=useState(\"none\"),_useState10=_slicedToArray(_useState9,2),transportType=_useState10[0],setTransportType=_useState10[1];var handleUserNameChange=function handleUserNameChange(event){setUserName(function(){return event.target.value;});};var handleMessageChange=function handleMessageChange(event){setMessage(function(){return event.target.value;});};var handleMessages=function handleMessages(msg){setMessages(function(messages){return[].concat(_toConsumableArray(messages),[msg]);});};var handleConnect=function handleConnect(){setOnline(true);};var handleDisconnect=function handleDisconnect(){setOnline(false);};var handleTransportType=function handleTransportType(){setTransportType(socket.current.io.engine.transport.query.transport);};var handleSubmit=function handleSubmit(event){event.preventDefault();setMessage(\"\");socket.current.emit('chat message',{message:message,userName:userName,timestamp:new Date()});};useEffect(function(){socket.current=SocketIOClient();socket.current.on(\"connect\",handleConnect);socket.current.on(\"disconnect\",function(){return handleDisconnect;});socket.current.on(\"chat message\",handleMessages);socket.current.onAny(handleTransportType);return function(){socket.current.removeAllListeners();};},[]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{display:\"flex\",alignItems:\"center\",gap:8},children:[/*#__PURE__*/_jsx(\"span\",{style:{width:16,height:16,backgroundColor:online?\"green\":\"red\",display:\"inline-block\",borderRadius:\"50%\"}}),/*#__PURE__*/_jsx(\"span\",{children:transportType}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:userName,onChange:handleUserNameChange,placeholder:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:handleMessageChange,placeholder:\"Message\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"})]}),messages.map(function(msg){var userName=msg.userName,message=msg.message,timestamp=msg.timestamp;var time=new Date(timestamp);return/*#__PURE__*/_jsxs(\"div\",{children:[time.getHours(),\":\",('0'+time.getMinutes()).slice(-2),\" | \",userName,\": \",message]},timestamp+userName);})]});};export default App;","map":{"version":3,"sources":["/home/tobias/Documents/test-app/client/src/App.js"],"names":["React","useEffect","useRef","useState","SocketIOClient","App","socket","userName","setUserName","message","setMessage","online","setOnline","messages","setMessages","transportType","setTransportType","handleUserNameChange","event","target","value","handleMessageChange","handleMessages","msg","handleConnect","handleDisconnect","handleTransportType","current","io","engine","transport","query","handleSubmit","preventDefault","emit","timestamp","Date","on","onAny","removeAllListeners","display","alignItems","gap","width","height","backgroundColor","borderRadius","map","time","getHours","getMinutes","slice"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\nimport SocketIOClient from 'socket.io-client';\n\nconst App = () => {\n  const socket = useRef(null);\n  const [userName, setUserName] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [online, setOnline] = useState(false);\n  const [messages, setMessages] = useState([]);\n  const [transportType, setTransportType] = useState(\"none\");\n\n  const handleUserNameChange = event => {\n    setUserName(() => event.target.value);\n  }\n\n  const handleMessageChange = event => {\n    setMessage(() => event.target.value);\n  }\n\n  const handleMessages = (msg) => {\n    setMessages(messages => [...messages, msg]);\n  }\n\n  const handleConnect = () => {\n    setOnline(true);\n  }\n\n  const handleDisconnect = () => {\n    setOnline(false);\n  }\n\n  const handleTransportType = () => {\n    setTransportType(socket.current.io.engine.transport.query.transport);\n  }\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setMessage(\"\");\n    socket.current.emit('chat message', {message, userName, timestamp: new Date()});\n  }\n\n  useEffect(() => {\n    socket.current = SocketIOClient();\n\n    socket.current.on(\"connect\", handleConnect);\n\n    socket.current.on(\"disconnect\", () => handleDisconnect);\n\n    socket.current.on(\"chat message\", handleMessages);\n\n    socket.current.onAny(handleTransportType);\n\n    return () => {\n      socket.current.removeAllListeners();\n    }\n  }, []);\n\n  return (\n    <>\n      <form onSubmit={handleSubmit} style={{display: \"flex\", alignItems: \"center\", gap: 8}}>\n        <span style={{\n          width: 16,\n          height: 16,\n          backgroundColor: online ? \"green\" : \"red\",\n          display: \"inline-block\",\n          borderRadius: \"50%\"\n        }} />\n        <span>{transportType}</span>\n        <input type=\"text\" value={userName} onChange={handleUserNameChange} placeholder=\"Username\" />\n        <input type=\"text\" value={message} onChange={handleMessageChange} placeholder=\"Message\" />\n        <button type=\"submit\">Submit</button>\n      </form>\n      {\n        messages.map(msg => {\n          const {userName, message, timestamp} = msg;\n          const time = new Date(timestamp);\n\n          return (\n            <div key={timestamp + userName}>{time.getHours()}:{('0' + time.getMinutes()).slice(-2)} | {userName}: {message}</div>\n          )\n        })\n      }\n    </>\n  )\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}